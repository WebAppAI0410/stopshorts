# Statistics UI Improvement - Requirements

## Overview
統計ページのUIを改善し、「どれだけショート動画を見る時間を減らせたか」を分かりやすく可視化する。

## User Stories

### US-1: 日/週タブ切り替え
**As a** ユーザー
**I want to** 「日」と「週」の表示を切り替えられる
**So that** 短期的な変化と長期的なトレンドの両方を確認できる

**Acceptance Criteria:**
- [ ] iPhoneスクリーンタイム風のセグメントコントロールが表示される
- [ ] タップで「日」「週」を切り替えられる
- [ ] 選択中のタブが視覚的に強調される
- [ ] タブ切り替え時にアニメーションが適用される

### US-2: 前日/前週との比較表示
**As a** ユーザー
**I want to** 今日の使用時間と昨日の使用時間を比較して見られる
**So that** 直近の改善/悪化を把握できる

**Acceptance Criteria:**
- [ ] 「日」タブ: 今日の使用時間と昨日比（%）が表示される
- [ ] 「週」タブ: 今週の使用時間と先週比（%）が表示される
- [ ] 減少時は緑色で↓、増加時は赤色で↑が表示される
- [ ] 変化がない場合は「変化なし」と表示される

### US-3: ベースラインからの削減率表示
**As a** ユーザー
**I want to** アプリ開始時からどれだけ削減できたかを見られる
**So that** 長期的な成果を実感できる

**Acceptance Criteria:**
- [ ] 「開始時から XX% 削減達成」のテキストが表示される
- [ ] ベースラインはオンボーディング時に設定した値を使用
- [ ] ベースラインがない場合は非表示

### US-4: 時間帯別比較グラフ（日タブ）
**As a** ユーザー
**I want to** 時間帯別（朝/昼/夕/夜）の使用時間を今日と昨日で比較できる
**So that** どの時間帯で改善/悪化したかを把握できる

**Acceptance Criteria:**
- [ ] 4つの時間帯（朝6-9, 昼9-17, 夕17-21, 夜21-6）の棒グラフが表示される
- [ ] 今日と昨日の棒が並列で表示される
- [ ] 凡例が表示される（■今日 ■昨日）
- [ ] ベースラインの水平線がオプションで表示される

### US-5: 日別比較グラフ（週タブ）
**As a** ユーザー
**I want to** 今週と先週の日別使用時間を比較できる
**So that** 週間の傾向を把握できる

**Acceptance Criteria:**
- [ ] 7日分（月〜日）の棒グラフが表示される
- [ ] 今週と先週の棒が並列で表示される
- [ ] 凡例が表示される（■今週 ■先週）
- [ ] ベースラインの水平線が表示される

### US-6: 4週間トレンド表示
**As a** ユーザー
**I want to** 過去4週間のトレンドを見られる
**So that** 長期的な改善傾向を確認できる

**Acceptance Criteria:**
- [ ] 過去4週間の週別合計がミニ棒グラフで表示される
- [ ] 週タブ選択時のみ表示される
- [ ] 削減傾向が視覚的に分かる

## Non-Functional Requirements

### NFR-1: パフォーマンス
- グラフの描画は60fpsを維持
- useMemoで計算結果をキャッシュ

### NFR-2: アクセシビリティ
- ダーク/ライトテーマ両対応
- 色覚異常者への配慮（色だけでなく形状やテキストでも区別）

### NFR-3: 国際化
- 全UI文字列はi18nキー経由
- 日本語対応必須

## Data Requirements

### 必要なデータ
1. **今日/昨日の使用時間**: 分単位
2. **今日/昨日の時間帯別内訳**: morning, daytime, evening, night
3. **今週/先週の日別使用時間**: DayData[]
4. **過去4週間の週別合計**: number[]
5. **ベースライン**: baselineMonthlyMinutes (月間→日次換算)

### データソース
- Android: UsageStats API経由
- iOS: モックデータ（将来実装）
- ベースライン: useAppStore.baselineMonthlyMinutes
