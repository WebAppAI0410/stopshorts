# Training UI Refresh - Requirements

## Overview

現状のトレーニング画面（`app/(main)/training/index.tsx`）はわかりにくく、UIが貧弱。カード形式のわかりやすいUIにリデザインする。

---

## Current Problems

| 問題 | 詳細 |
|------|------|
| 視認性が低い | カテゴリとトピックの区別がつきにくい |
| 進捗がわかりにくい | 小さいプログレスバーのみ |
| 情報量が多い | メタ情報が詰め込まれている |
| 導線が不明瞭 | 次に何をすべきかわからない |

---

## 決定事項（確定）

| 項目 | 決定 | 備考 |
|------|------|------|
| トピック完了条件 | 全コンテンツ完了 | 記事+クイズ+ワークシート全て |
| コンテンツ順序 | 自由（ロックなし） | どれからでも開始可能 |
| 「次におすすめ」ロジック | 進捗率が高い未完了トピック | 全完了時は非表示 |
| 復習機能 | 可能 | 完了後も閲覧可 |
| トピック表示 | カテゴリ別グループ | セクション分け |
| 進捗リセット | 設定画面から可能 | 確認ダイアログ付き |
| ストリーク表示 | なし | - |
| 所要時間表示 | あり | 各トピック/コンテンツに表示 |
| 課金終了後 | ブロック | 購読モーダル表示 |

### コンテンツ完了条件

| タイプ | 完了条件 | 備考 |
|--------|----------|------|
| 記事 | 「読んだ」ボタン押下 | 最下部に配置 |
| クイズ | 全問正解 | 不正解時は即時フィードバック+再回答 |
| ワークシート | 「完了」ボタン押下 | 入力内容は保存 |

---

## Functional Requirements

### FR-1: トピック一覧画面

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-1.1 | カード形式でトピックを表示（2列グリッド） | P0 |
| FR-1.2 | 各カードにトピック名、進捗、ステータスバッジを表示 | P0 |
| FR-1.3 | 完了済みトピックにチェックマーク表示 | P0 |
| FR-1.4 | 「次におすすめ」のトピックをハイライト（フィーチャーカード） | P0 |
| FR-1.5 | カテゴリ別にセクション分け | P0 |
| FR-1.6 | 全トピック完了時は「おすすめ」非表示 | P0 |

### FR-2: 進捗表示

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-2.1 | 全体進捗を画面上部に進捗リングで表示（X/Y完了） | P0 |
| FR-2.2 | 各トピックの進捗をカード内に表示 | P0 |
| FR-2.3 | 所要時間をトピック/コンテンツに表示 | P0 |

### FR-3: トピック詳細画面

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-3.1 | コンテンツ一覧をリスト形式で表示 | P0 |
| FR-3.2 | 記事/クイズ/ワークシートのアイコン区別 | P0 |
| FR-3.3 | 完了済みコンテンツのチェック表示 | P0 |
| FR-3.4 | 各コンテンツの所要時間表示 | P0 |

### FR-4: コンテンツ表示

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-4.1 | 記事: 読みやすいレイアウト + 「読んだ」ボタン | P0 |
| FR-4.2 | クイズ: 選択肢UI + 即時フィードバック + 再回答 | P0 |
| FR-4.3 | ワークシート: 入力UI + 「完了」ボタン + 入力保存 | P0 |

### FR-5: 復習機能

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-5.1 | 完了済みトピックの閲覧可能 | P0 |
| FR-5.2 | ワークシートの過去入力表示 | P0 |

### FR-6: 進捗リセット

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-6.1 | 設定画面に「トレーニング進捗リセット」ボタン | P1 |
| FR-6.2 | 確認ダイアログ表示 | P1 |
| FR-6.3 | リセット時にワークシート入力内容も削除 | P1 |

### FR-7: 全トピック完了時

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-7.1 | 祝福メッセージ/アニメーション表示 | P1 |
| FR-7.2 | 進捗リングを100%表示 | P0 |

### FR-8: 完了アニメーション

| ID | 要件 | 優先度 |
|----|------|--------|
| FR-8.1 | トピック完了時のアニメーション | P2 |
| FR-8.2 | コンテンツ完了時のチェックマークアニメーション | P2 |
| FR-8.3 | 達成感を演出するフィードバック | P2 |

---

## Design Requirements

### DR-1: カードデザイン

- 角丸のカード形式
- 適度な余白（padding）
- タップ可能な領域を明確に
- ホバー/プレス状態のフィードバック

### DR-2: カラー

- アクセント: エメラルドグリーン (#10B981)
- 進捗バー: アクセント色
- 完了状態: success色（緑系）
- 未開始: textMuted

### DR-3: タイポグラフィ

- トピック名: h3相当
- 説明文: bodySmall
- メタ情報: caption

---

## Out of Scope

- 新規トレーニングコンテンツの追加
- ゲーミフィケーション要素（バッジ等）
- ソーシャル機能
- ストリーク表示

---

## Existing Assets

| 資料 | パス |
|------|------|
| 現行実装 | `app/(main)/training/index.tsx` |
| トピック詳細 | `app/(main)/training/[topicId].tsx` |
| トピックデータ | `src/data/trainingTopics.ts` |
| 型定義 | `src/types/training.ts` |
