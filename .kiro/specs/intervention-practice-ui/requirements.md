# 介入を練習 (Intervention Practice) 画面 UI改善仕様書

## 概要

ユーザーが介入機能を練習モードで体験できる画面のUI/UXを改善する。現状は単純なリスト表示であり、視覚的な魅力やユーザーの学習意欲を高める要素が不足している。

## 現状の問題点

| 問題 | 詳細 |
|------|------|
| 単調なリスト表示 | 4つの選択肢が同じサイズ・同じレイアウトで並んでおり、視覚的な階層がない |
| イラスト不在 | アイコンのみで各介入タイプの特徴を伝えようとしており、直感的理解が困難 |
| 学習意欲を喚起しない | 「練習」という教育的文脈に対して、ゲーミフィケーション要素がない |
| 情報過多 | 全選択肢を一度に表示しており、ユーザーが選択に迷う |
| AI未準備状態の表現 | ロックアイコンのみで、「ダウンロードが必要」という状態が分かりにくい |

## 目的

1. 各介入タイプの特徴を視覚的に伝える
2. ユーザーが練習を始めたくなるUI
3. 初心者におすすめの介入を明確にする
4. AI未準備状態を分かりやすく伝える

---

## 介入タイプ一覧

| ID | 名称 | アイコン | 特徴 | 所要時間 |
|----|------|---------|------|----------|
| `breathing` | 呼吸ガイド | `leaf-outline` | 深呼吸で衝動を落ち着かせる。最も基本的な介入 | 30-90秒 |
| `friction` | フリクション | `time-outline` | 待機時間と意図確認。認知的負荷を与えて衝動を抑制 | 10-30秒 |
| `mirror` | ミラー | `person-outline` | 前面カメラで自分を見つめる。自己認識を高める | 10-30秒 |
| `ai` | AIコーチ | `chatbubble-outline` | AIと会話して衝動の原因を探る。最も高度 | 1-5分 |

---

## UI設計方針

### デザインコンセプト: "Journey Cards"

各介入タイプを「旅の選択肢」として表現し、ユーザーが自分に合った方法を発見する体験を提供する。

### レイアウト構成

```
┌─────────────────────────────────────────┐
│  ←                                       │
├─────────────────────────────────────────┤
│                                         │
│        🧘‍♀️ 介入を練習                     │
│                                         │
│   実際のアプリ検出時と同じ介入を            │
│   練習モードで体験できます                   │
│                                         │
├─────────────────────────────────────────┤
│                                         │
│   ✨ おすすめ                             │
│   ┌───────────────────────────────────┐ │
│   │  🌿  呼吸ガイド                     │ │
│   │                                   │ │
│   │  [イラスト: 落ち着いた波紋]          │ │
│   │                                   │ │
│   │  深呼吸で衝動を落ち着かせる          │ │
│   │  最も効果的な基本テクニック          │ │
│   │                                   │ │
│   │  ⏱️ 30-90秒   [ 試してみる → ]     │ │
│   └───────────────────────────────────┘ │
│                                         │
│   その他の介入                            │
│   ┌─────────┐ ┌─────────┐ ┌─────────┐  │
│   │⏳       │ │👤       │ │🤖       │  │
│   │フリク   │ │ミラー   │ │AIコーチ │  │
│   │ション   │ │         │ │         │  │
│   │         │ │         │ │ 🔒      │  │
│   └─────────┘ └─────────┘ └─────────┘  │
│                                         │
├─────────────────────────────────────────┤
│  ℹ️ 練習モードでは統計に記録されません      │
└─────────────────────────────────────────┘
```

### コンポーネント詳細

#### 1. ヒーローカード (Featured Card)

**対象**: 呼吸ガイド（最も基本的で効果的）

| 要素 | 仕様 |
|------|------|
| サイズ | 幅: 100% (gutter除く), 高さ: 200dp |
| 背景 | グラデーション（emerald → teal、左下から右上） |
| イラスト | 抽象的な波紋・円形のモーション表現 |
| バッジ | 「✨ おすすめ」ラベル（左上） |
| タイトル | h2 (24sp, Bold, White) |
| 説明 | body (15sp, White 80%) |
| 所要時間 | caption with clock icon |
| CTA | 「試してみる →」ボタン (White, filled) |

#### 2. ミニカード (Secondary Cards)

**対象**: フリクション、ミラー、AIコーチ

| 要素 | 仕様 |
|------|------|
| レイアウト | 3カラムグリッド (gap: 12dp) |
| サイズ | 幅: (screen - gutter*2 - gap*2) / 3, 高さ: 120dp |
| 背景 | colors.surface (ダーク) / colors.backgroundCard (ライト) |
| アイコン | 32dp, 中央配置 |
| タイトル | caption (12sp, SemiBold) |
| ロック状態 | 半透明 + ロックアイコンオーバーレイ |

#### 3. AIコーチ特別状態

AIモデル未準備時:
- カード全体を 50% 透明
- 「ダウンロードが必要」バッジ表示
- タップ → AIコーチ画面へ遷移（ダウンロード促進）

---

## カラー仕様

### 呼吸ガイド (Breathing)
```
背景グラデーション: linear-gradient(135deg, #10B981 0%, #14B8A6 100%)
アイコン背景: rgba(255, 255, 255, 0.2)
```

### フリクション (Friction)
```
アイコン色: #F97316 (orange.500)
アイコン背景: rgba(249, 115, 22, 0.15)
```

### ミラー (Mirror)
```
アイコン色: #8B5CF6 (purple.500)
アイコン背景: rgba(139, 92, 246, 0.15)
```

### AIコーチ (AI)
```
アイコン色: #10B981 (emerald.500)
アイコン背景: rgba(16, 185, 129, 0.15)
```

---

## アニメーション

| 要素 | アニメーション | 詳細 |
|------|--------------|------|
| ヒーローカード | FadeInDown | duration: 600ms |
| ミニカード | FadeInUp | duration: 400ms, delay: 100ms * index |
| ヒーローイラスト | Pulse/Breathe | 継続的、3秒周期 |
| カードタップ | Scale | 0.98 → 1.0, 150ms |

---

## インタラクション

| アクション | 結果 |
|-----------|------|
| 戻るボタン | 前画面へ / ホームへ |
| ヒーローカードタップ | urge-surfing?practiceType=breathing へ遷移 |
| ミニカードタップ (利用可能) | urge-surfing?practiceType={type} へ遷移 |
| ミニカードタップ (AI未準備) | ai画面へ遷移 + ダウンロード案内 |

---

## i18n キー

```json
{
  "intervention": {
    "practice": {
      "title": "介入を練習",
      "subtitle": "実際のアプリ検出時と同じ介入を\n練習モードで体験できます",
      "recommended": "おすすめ",
      "otherOptions": "その他の介入",
      "tryIt": "試してみる",
      "duration": "{{min}}-{{max}}秒",
      "durationMinutes": "{{min}}-{{max}}分",
      "info": "練習モードでは統計に記録されません",
      "downloadRequired": "ダウンロードが必要",
      "options": {
        "breathing": {
          "title": "呼吸ガイド",
          "tagline": "最も効果的な基本テクニック",
          "description": "深呼吸で衝動を落ち着かせる"
        },
        "friction": {
          "title": "フリクション",
          "description": "待機時間と意図確認"
        },
        "mirror": {
          "title": "ミラー",
          "description": "自分を見つめて冷静に"
        },
        "ai": {
          "title": "AIコーチ",
          "description": "会話で衝動を分析"
        }
      }
    }
  }
}
```

---

## 実装ファイル

| ファイル | 変更内容 |
|---------|---------|
| `app/(main)/intervention-practice.tsx` | UI全面刷新 |
| `src/components/intervention-practice/FeaturedCard.tsx` | 新規: ヒーローカード |
| `src/components/intervention-practice/MiniCard.tsx` | 新規: ミニカード |
| `src/i18n/locales/ja.json` | 新規キー追加 |

---

## 参考デザイン

- **Headspace**: コースカードのグラデーション表現
- **Calm**: 瞑想選択画面のイラストレーション
- **Duolingo**: おすすめコンテンツのハイライト表現
