# StopShorts オンボーディングフロー設計書 v2

> **このドキュメントについて**
> 各ページの目的、コンテンツ、心理的狙いを記述しています。
> レビュー後、修正箇所にコメントを追加してください。

---

## 概要

- **全10ステップ**（新規: アプリ選択ページを追加）
- **所要時間**: 約2-3分
- **設計思想**: **ショート動画の視聴習慣を徹底的に撲滅する**

---

## アセット

### モック用チャンネルアイコン
- **ファイル**: `assets/images/mock-channel-icon.png`
- **用途**: オンボーディングや説明画面でのモックTikTok風UI表示

---

## アプリの主要機能（実装予定）

### 1. 5分シールド機能
ショート動画アプリを5分使用すると、シールド画面が表示される

### 2. 習慣化コーチング機能 ⭐ NEW
**「ショート動画を使わない」習慣を形成するためのコーチング**

| アプローチ | 説明 | 心理学的根拠 |
|-----------|------|-------------|
| **条件付け介入** | スワイプ時に余分な行動（例：深呼吸、カウント）を挟む | パブロフの犬（古典的条件付け） |
| **行動置換** | 無限スワイプの代わりに別の行動を促す | 習慣ループの置換 |
| **意識化トリガー** | 特定の回数・時間でアラート | メタ認知の活性化 |

**実装アイデア（要検討）:**
- スワイプ前に「本当に見る？」の確認を入れる
- X回スワイプごとに深呼吸プロンプト
- 「あと5回で終わりにする」カウントダウン
- スワイプ動作に物理的な抵抗感を加える（要技術検証）

> **Note**: 心理学的観点から最適な方法を別途検討予定

---

## 改訂後のフロー

```
[1] Welcome（アプリ説明）
     ↓
[2] The Problem（デメリット説明）
     ↓
[3] Goal（何を取り戻すか）
     ↓
[4] Screen Time Permission
     ↓
[5] App Selection（アプリ選択）← 新規追加
     ↓
[6] Reality Check
     ↓
[7] Alternative
     ↓
[8] If-Then
     ↓
[9] How It Works
     ↓
[10] Start
```

---

## ステップ 1: Welcome（アプリ説明）

### 目的
アプリが何をするものか、設計思想を明確に伝える

### コンテンツ案

| 要素 | 内容 |
|------|------|
| ロゴ/アイコン | StopShortsロゴ（シールドまたは停止アイコン） |
| タイトル | **ショート動画を、やめる。** |
| サブタイトル | TikTok、YouTube Shorts、Instagram Reels。<br>気づいたら1時間。その習慣を、終わりにします。 |
| アプリ説明 | StopShortsは、ショート動画アプリの使用を**5分で強制的に意識させる**アプリです。 |
| 設計思想 | 「ちょっとだけ減らす」ではなく、<br>**「習慣そのものを断ち切る」**ことを目指します。 |
| ボタン | 始める |

### 心理的狙い
- 最初に「これは何のアプリか」を明確に伝える
- 「徹底的に撲滅する」という強い姿勢を示す
- ユーザーの覚悟を問う

### UI案
```
┌─────────────────────────────┐
│                             │
│     [StopShortsロゴ]        │
│                             │
│   ショート動画を、やめる。    │  ← h1, bold
│                             │
│   TikTok、YouTube Shorts、   │  ← body, textSecondary
│   Instagram Reels。          │
│   気づいたら1時間。           │
│   その習慣を、終わりにします。 │
│                             │
│   ─────────                  │  ← divider
│                             │
│   5分で強制的に意識させる     │  ← caption
│   アプリです。               │
│                             │
│   「習慣そのものを断ち切る」   │  ← accent color, bold
│                             │
│   ┌─────────────────────┐   │
│   │       始める         │   │
│   └─────────────────────┘   │
│                             │
│      ● ○ ○ ○ ○ ○ ○ ○ ○      │
└─────────────────────────────┘
```

---

## ステップ 2: The Problem（デメリット説明）← 新規

### 目的
ショート動画の害を研究ベースで伝え、危機感を持たせる

### コンテンツ案

| 要素 | 内容 |
|------|------|
| タイトル | **知っていますか？** |
| サブタイトル | ショート動画があなたに与える影響 |

**3つのデメリット（カード形式）:**

| カード | アイコン | タイトル | 説明 |
|--------|----------|----------|------|
| 1 | 🧠 | **集中力の低下** | 10万人規模の研究で、ショート動画の多用と認知能力の低下に相関が確認されています。 |
| 2 | 😵‍💫 | **ドーパミン中毒** | 脳のドーパミン受容体が20-30%減少。これは薬物依存と同じパターンです。 |
| 3 | 😴 | **睡眠の質の悪化** | 無限スクロールが睡眠開始を遅らせ、深夜のスクリーンタイムを増加させます。 |

| 要素 | 内容 |
|------|------|
| 補足 | 2024年、オックスフォード大学は「Brain rot（脳の劣化）」を今年の言葉に選びました。ショート動画の過剰視聴がその原因です。 |
| ボタン | 次へ |

### 心理的狙い
- 研究データで危機感を与える
- 「これはヤバい」と自覚させる
- 行動変容の動機を強化

### UI案
```
┌─────────────────────────────┐
│  ←                          │
│                             │
│   知っていますか？            │  ← h1
│   ショート動画があなたに      │  ← body
│   与える影響                 │
│                             │
│   ┌─────────────────────┐   │
│   │ 🧠 集中力の低下      │   │  ← Card 1
│   │ 10万人規模の研究で   │   │
│   │ 認知能力低下と相関   │   │
│   └─────────────────────┘   │
│                             │
│   ┌─────────────────────┐   │
│   │ 😵‍💫 ドーパミン中毒   │   │  ← Card 2
│   │ 受容体が20-30%減少   │   │
│   │ 薬物依存と同パターン │   │
│   └─────────────────────┘   │
│                             │
│   ┌─────────────────────┐   │
│   │ 😴 睡眠の質の悪化    │   │  ← Card 3
│   │ 無限スクロールが     │   │
│   │ 睡眠開始を遅らせる   │   │
│   └─────────────────────┘   │
│                             │
│   「Brain rot」            │  ← 補足
│   2024年 今年の言葉         │
│                             │
│   ┌─────────────────────┐   │
│   │       次へ          │   │
│   └─────────────────────┘   │
│      ○ ● ○ ○ ○ ○ ○ ○ ○      │
└─────────────────────────────┘
```

---

## ステップ 3: Goal（何を取り戻すか）← 旧Motivation、方向性変更

### 目的
ショート動画のデメリットを消す = 何を取り戻すか を選択させる

### コンテンツ案

| 要素 | 内容 |
|------|------|
| タイトル | **何を取り戻しますか？** |
| サブタイトル | ショート動画をやめることで得られるもの |

**選択肢（デメリットの裏返し）:**

| 選択肢 | アイコン | タイトル | 説明 |
|--------|----------|----------|------|
| concentration | 🎯 | **集中力** | 途切れない集中で、仕事や勉強の効率を上げる |
| sleep | 🌙 | **睡眠時間** | 夜更かしをやめて、質の良い睡眠を取り戻す |
| time | ⏰ | **自由な時間** | 毎日1-2時間。年間で数百時間を取り戻す |
| mental | 🧘 | **心の余裕** | 常に刺激を求める状態から解放される |

| 要素 | 内容 |
|------|------|
| ボタン | 続ける（選択後に有効化） |

### 心理的狙い
- Step 2のデメリットに対応する「解決策」を提示
- ユーザー自身に「これを取り戻したい」と選ばせる
- 動機の内在化

### UI案
```
┌─────────────────────────────┐
│  ←                          │
│                             │
│   何を取り戻しますか？        │  ← h1
│   ショート動画をやめることで  │  ← body
│   得られるもの               │
│                             │
│   ┌─────────────────────┐   │
│   │ 🎯 集中力            │   │  ← SelectionCard
│   │ 途切れない集中で...   │   │
│   └─────────────────────┘   │
│                             │
│   ┌─────────────────────┐   │
│   │ 🌙 睡眠時間          │   │
│   │ 夜更かしをやめて...   │   │
│   └─────────────────────┘   │
│                             │
│   ┌─────────────────────┐   │
│   │ ⏰ 自由な時間        │   │
│   │ 毎日1-2時間を...     │   │
│   └─────────────────────┘   │
│                             │
│   ┌─────────────────────┐   │
│   │ 🧘 心の余裕          │   │
│   │ 常に刺激を求める...   │   │
│   └─────────────────────┘   │
│                             │
│   ┌─────────────────────┐   │
│   │       続ける         │   │
│   └─────────────────────┘   │
│      ○ ○ ● ○ ○ ○ ○ ○ ○      │
└─────────────────────────────┘
```

---

## ステップ 4: Screen Time Permission（権限許可）

### 現在のコンテンツ（変更なし）
| 要素 | 内容 |
|------|------|
| アイコン | バーチャートアイコン |
| タイトル | あなたの現実を見てみませんか？ |
| サブタイトル | スクリーンタイムのデータを使って実際の使用状況をお見せします。 |
| プライバシーノート | データはあなたのデバイス内でのみ処理されます。 |
| ボタン | 現実を見る / スキップする |

### 心理的狙い
- プライバシーへの配慮を示す
- 「現実を見る」という好奇心を刺激

---

## ステップ 5: App Selection（アプリ選択）← 新規追加

### 目的
ブロック対象のショート動画アプリをユーザーに選択させる

### コンテンツ案

| 要素 | 内容 |
|------|------|
| タイトル | **どのアプリを制限しますか？** |
| サブタイトル | 5分で介入するアプリを選んでください |

**選択肢（6つのデフォルトアプリ）:**

| アプリ | アイコン | デフォルト状態 | 説明 |
|--------|----------|----------------|------|
| TikTok | TikTokロゴ | ✅ 選択済み | 主要なショート動画アプリ |
| YouTube Shorts | YouTubeロゴ | ✅ 選択済み | YouTube内のショート動画機能 |
| Instagram Reels | Instagramロゴ | ✅ 選択済み | Instagram内のリール機能 |
| X (Twitter) | Xロゴ | ☐ 未選択 | X内の動画フィード |
| Facebook Reels | Facebookロゴ | ☐ 未選択 | Facebook内のリール機能 |
| Snapchat Spotlight | Snapchatロゴ | ☐ 未選択 | Snapchat内のSpotlight機能 |

| 要素 | 内容 |
|------|------|
| カスタム追加 | 「+ 他のアプリを追加」ボタン → Family Controls Picker表示 |
| バリデーション | **⚠️ 最低1つのアプリを選択必須** |
| ボタン | 続ける（1つ以上選択時のみ有効化） |

### バリデーションルール

```
if (selectedApps.length === 0) {
  // ボタンを無効化
  // エラーメッセージ表示: "少なくとも1つのアプリを選択してください"
  return;
}
```

### 心理的狙い
- ユーザー自身に「これをやめたい」と選ばせることで、主体性を持たせる
- 3つのアプリがデフォルトで選択済みなので、何も変更しなくても進める
- カスタム追加で「Xのリールも...」と気づいたユーザーに対応

### UI案
```
┌─────────────────────────────┐
│  ←                          │
│                             │
│   どのアプリを制限しますか？  │  ← h1
│   5分で介入するアプリを      │  ← body
│   選んでください             │
│                             │
│   ┌─────────────────────┐   │
│   │ [✓] TikTok         │   │  ← 選択済み
│   └─────────────────────┘   │
│   ┌─────────────────────┐   │
│   │ [✓] YouTube Shorts │   │  ← 選択済み
│   └─────────────────────┘   │
│   ┌─────────────────────┐   │
│   │ [✓] Instagram Reels│   │  ← 選択済み
│   └─────────────────────┘   │
│   ┌─────────────────────┐   │
│   │ [ ] X (Twitter)    │   │  ← 未選択
│   └─────────────────────┘   │
│   ┌─────────────────────┐   │
│   │ [ ] Facebook Reels │   │  ← 未選択
│   └─────────────────────┘   │
│   ┌─────────────────────┐   │
│   │ [ ] Snapchat       │   │  ← 未選択
│   └─────────────────────┘   │
│                             │
│   ┌ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┐   │
│     + 他のアプリを追加      │  ← 破線ボタン
│   └ ─ ─ ─ ─ ─ ─ ─ ─ ─ ┘   │
│                             │
│   ┌─────────────────────┐   │
│   │       続ける         │   │  ← 1つ以上選択時のみ有効
│   └─────────────────────┘   │
│      ○ ○ ○ ○ ● ○ ○ ○ ○ ○    │
└─────────────────────────────┘
```

### エラー状態のUI案
```
┌─────────────────────────────┐
│  ←                          │
│                             │
│   どのアプリを制限しますか？  │
│   ...                        │
│                             │
│   ┌─────────────────────┐   │
│   │ [ ] TikTok         │   │  ← すべて未選択
│   └─────────────────────┘   │
│   ...                        │
│                             │
│   ⚠️ 少なくとも1つの         │  ← エラーメッセージ（赤）
│      アプリを選択してください │
│                             │
│   ┌─────────────────────┐   │
│   │       続ける         │   │  ← disabled状態
│   └─────────────────────┘   │
└─────────────────────────────┘
```

---

## ステップ 6: Reality Check（現実確認）

### 現在のコンテンツ（変更なし）
| 要素 | 内容 |
|------|------|
| タイトル | 先週のあなた |
| データ表示 | 週間合計、アプリ別内訳、年間換算、本○冊分 |
| CTA | この時間を取り戻しませんか？ |
| ボタン | 取り戻す |

---

## ステップ 7: Alternative（代替活動）

### コンテンツ
| 要素 | 内容 |
|------|------|
| タイトル | 取り戻した時間で、何をしますか？ |
| 選択肢 | 読書、運動、趣味、学習、休息、自分で書く |
| コミットメント文 | 私は、ショート動画の代わりに**○○**に時間を使います。 |
| ボタン | この約束を守る |

### ⚠️ 修正必要
**コミットメント文に選択した活動が動的に反映されていない**

**現状の問題:**
- 選択肢を選んでもコミットメント文に反映されない
- `commitmentEnd` 翻訳キーが使われていない
- 表示: 「私は、ショート動画の代わりに」（途中で切れている）

**修正後の期待動作:**
- 選択すると: 「私は、ショート動画の代わりに**読書をする**に時間を使います。」
- 動的に選択内容が挿入される

**修正箇所:** `app/(onboarding)/alternative.tsx` 112-136行目

---

## ステップ 8: If-Then（If-Thenプラン）

### 現在のコンテンツ（変更なし）
| 要素 | 内容 |
|------|------|
| タイトル | ショート動画を開きたくなったら... |
| 選択肢 | 深呼吸、本1ページ、外を見る、散歩、ストレッチ、水を飲む |
| ボタン | 続ける |

---

## ステップ 9: How It Works（仕組み説明）

### 現在のコンテンツ（変更なし）
| 要素 | 内容 |
|------|------|
| タイトル | StopShortsの仕組み |
| ステップ1-3 | タイマー開始 → シールド表示 → 選択 |
| 注記 | 強制ではありません。「気づき」を与えるだけ。 |
| ボタン | 理解しました |

---

## ステップ 10: Start（最終確認・開始）

### 現在のコンテンツ（変更なし）
| 要素 | 内容 |
|------|------|
| タイトル | あなたの約束 |
| 表示項目 | 理由、取り戻す時間、代わりにやること、開きたくなったら |
| ボタン | 今日から始める |
| 注記 | 3日間無料トライアル |

### ⚠️ 重要: ブロック有効化タイミング

**「今日から始める」ボタンを押したタイミングで、以下が実行される：**

```
[ユーザーが「今日から始める」をタップ]
        ↓
[1] ManagedSettingsでShield設定を適用
    → 選択されたアプリにShieldが設定される
        ↓
[2] DeviceActivityMonitorで5分監視を開始
    → アプリ使用開始から5分でShieldがトリガーされる
        ↓
[3] 3日間無料トライアル開始
    → トライアル期間のカウント開始
        ↓
[4] オンボーディング完了フラグを保存
    → 次回起動時はダッシュボードへ直接遷移
```

**なぜこのタイミングか：**
- ユーザーがオンボーディング全体を理解してからブロック開始
- 「今日から始める」という明確な意思表示がトリガー
- Goal、Alternative、If-Thenの設定が完了してからの開始

### 心理的狙い
- オンボーディング中に設定した「約束」を確認させる
- 「今日から始める」という自己決定を促す
- コミットメントの可視化

---

## 翻訳キー追加案（ja.json）

```json
{
  "onboarding": {
    "v3": {
      "welcome": {
        "title": "ショート動画を、やめる。",
        "subtitle": "TikTok、YouTube Shorts、Instagram Reels。\n気づいたら1時間。その習慣を、終わりにします。",
        "appDescription": "StopShortsは、ショート動画アプリの使用を5分で強制的に意識させるアプリです。",
        "philosophy": "「ちょっとだけ減らす」ではなく、「習慣そのものを断ち切る」ことを目指します。",
        "startButton": "始める"
      },
      "theProblem": {
        "title": "知っていますか？",
        "subtitle": "ショート動画があなたに与える影響",
        "problems": {
          "concentration": {
            "title": "集中力の低下",
            "description": "10万人規模の研究で、ショート動画の多用と認知能力の低下に相関が確認されています。"
          },
          "dopamine": {
            "title": "ドーパミン中毒",
            "description": "脳のドーパミン受容体が20-30%減少。これは薬物依存と同じパターンです。"
          },
          "sleep": {
            "title": "睡眠の質の悪化",
            "description": "無限スクロールが睡眠開始を遅らせ、深夜のスクリーンタイムを増加させます。"
          }
        },
        "brainRot": "2024年、オックスフォード大学は「Brain rot（脳の劣化）」を今年の言葉に選びました。",
        "continueButton": "次へ"
      },
      "goal": {
        "title": "何を取り戻しますか？",
        "subtitle": "ショート動画をやめることで得られるもの",
        "options": {
          "concentration": {
            "title": "集中力",
            "description": "途切れない集中で、仕事や勉強の効率を上げる"
          },
          "sleep": {
            "title": "睡眠時間",
            "description": "夜更かしをやめて、質の良い睡眠を取り戻す"
          },
          "time": {
            "title": "自由な時間",
            "description": "毎日1-2時間。年間で数百時間を取り戻す"
          },
          "mental": {
            "title": "心の余裕",
            "description": "常に刺激を求める状態から解放される"
          }
        },
        "continueButton": "続ける"
      },
      "appSelection": {
        "title": "どのアプリを制限しますか？",
        "subtitle": "5分で介入するアプリを選んでください",
        "apps": {
          "tiktok": "TikTok",
          "youtubeShorts": "YouTube Shorts",
          "instagramReels": "Instagram Reels",
          "twitter": "X (Twitter)",
          "facebookReels": "Facebook Reels",
          "snapchat": "Snapchat Spotlight"
        },
        "addMore": "他のアプリを追加",
        "validation": "少なくとも1つのアプリを選択してください",
        "continueButton": "続ける"
      }
    }
  }
}
```

---

## 研究データソース

ステップ2で使用するデータの出典：

1. **集中力低下**: 71の研究（約10万人）のメタ分析で、ショートフォーム動画の広範な使用と認知能力（特に注意力と衝動制御）の低下に相関が確認（2024年9月）

2. **ドーパミン受容体**: ショート動画アプリの多用により、脳のD2ドーパミン受容体が20-30%減少。これは物質使用障害でも観察されるパターン

3. **睡眠障害**: 無限スクロール機能が生理的覚醒を引き起こし、睡眠開始を遅延。TikTokヘビーユーザーは午後9時〜午前1時の深夜スクリーンタイムが顕著に増加

4. **Brain rot**: オックスフォード大学出版局が2024年のWord of the Yearに選出。「取るに足らないオンラインコンテンツの過剰摂取による精神的・知的状態の劣化」と定義

---

## ダッシュボードからの設定変更

オンボーディングで設定した内容は、**ダッシュボード→設定画面**からいつでも変更可能です。

### 変更可能な項目

| 設定項目 | オンボーディング | 設定画面での変更 |
|---------|-----------------|-----------------|
| **対象アプリ** | Step 5: App Selection | ✅ 可能（即時反映） |
| **目標** | Step 3: Goal | ✅ 可能（Shield文言も更新） |
| **代替活動** | Step 7: Alternative | ✅ 可能 |
| **If-Thenプラン** | Step 8: If-Then | ✅ 可能（Shield画面に反映） |
| **介入時間** | デフォルト5分 | ✅ 可能（1/3/5/10分） |

### 設定変更時の挙動

```
[ユーザーが設定を変更]
        ↓
[1] Zustand Storeを更新
        ↓
[2] 対象アプリ変更の場合
    → ManagedSettingsを即時更新
    → 新しいアプリにShield設定を適用
        ↓
[3] 目標変更の場合
    → Shield文言のパーソナライズを更新
    → 次回Shield表示時に新文言が反映
```

### UI設計

設定画面では、オンボーディングと同じ選択肢を再表示：

```
┌─────────────────────────────────────┐
│  ←  目標を変更                       │
│                                     │
│    何を取り戻しますか？               │
│                                     │
│    ┌─────────────────────────────┐  │
│    │ [✓] 🎯 集中力             │  │  ← 現在選択中
│    └─────────────────────────────┘  │
│    ┌─────────────────────────────┐  │
│    │ [ ] 🌙 睡眠時間           │  │
│    └─────────────────────────────┘  │
│    ┌─────────────────────────────┐  │
│    │ [ ] ⏰ 自由な時間         │  │
│    └─────────────────────────────┘  │
│    ┌─────────────────────────────┐  │
│    │ [ ] 🧘 心の余裕           │  │
│    └─────────────────────────────┘  │
│                                     │
│    ┌─────────────────────────────┐  │
│    │         保存する           │  │
│    └─────────────────────────────┘  │
└─────────────────────────────────────┘
```

### 翻訳キー追加

```json
{
  "settings": {
    "yourSettings": {
      "title": "あなたの設定",
      "goal": "目標",
      "alternative": "代替活動",
      "ifThen": "If-Thenプラン"
    },
    "changeGoal": {
      "title": "目標を変更",
      "save": "保存する"
    },
    "changeAlternative": {
      "title": "代替活動を変更",
      "save": "保存する"
    },
    "changeIfThen": {
      "title": "If-Thenプランを変更",
      "save": "保存する"
    }
  }
}
```

---

## 変更履歴

| 日付 | 変更内容 |
|------|----------|
| 2025-12-20 | 初版作成 |
| 2025-12-20 | v2: Step 1-3を大幅改訂。デメリット説明ページを追加 |
| 2025-12-20 | Step 6 (Alternative): コミットメント文の動的反映バグを記載 |
| 2025-12-20 | v3: Step 5 App Selection（アプリ選択）を追加。全10ステップに変更。最低1つ選択必須のバリデーション追加 |
| 2025-12-20 | v4: ブロック有効化タイミングを明記。ダッシュボードからの設定変更セクションを追加 |

---

## 次のステップ

1. [ ] このドキュメントをレビュー
2. [ ] 各ステップの内容を確認・修正
3. [ ] 翻訳キーを確定
4. [ ] 実装に反映
