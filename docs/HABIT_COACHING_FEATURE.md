# StopShorts 習慣化コーチング機能 設計書 v2.0

> **このドキュメントについて**
> ショート動画の視聴習慣を断ち切るための「習慣化コーチング機能」と「統計機能」の設計書です。
> 行動科学・心理学の研究に基づいた複数の習慣形成手法を組み合わせた設計を記述します。

---

## 目次

1. [概要](#概要)
2. [心理学的基盤](#心理学的基盤)
3. [習慣形成ツールキット](#習慣形成ツールキット)
4. [コア機能設計](#コア機能設計)
5. [統計・分析機能](#統計分析機能)
6. [ゲーミフィケーション](#ゲーミフィケーション)
7. [技術的実装要件](#技術的実装要件)
8. [課金モデル](#課金モデル)
9. [実装ロードマップ](#実装ロードマップ)

---

## 概要

### 目的
ショート動画アプリ（TikTok、YouTube Shorts、Instagram Reels）を**無意識に開く習慣**を断ち切り、**意識的な選択**に変える。

### 設計思想
1. **完全ブロックではなく「意識化」** - 使用を禁止するのではなく、使う前に立ち止まらせる
2. **科学的根拠に基づく設計** - 行動変容理論を複合的に活用
3. **能動的な習慣形成** - 受動的な介入だけでなく、自ら練習する仕組み
4. **可視化による自己効力感** - データで成長を実感

### 競合分析: one secアプリ

#### one secの優れている点

| 要素 | 説明 | 心理学的根拠 |
|------|------|-------------|
| **意図的な摩擦** | アプリ起動を遅延させる | 自動的な行動を中断し再考の機会を与える |
| **深呼吸ガイダンス** | 5-10秒の呼吸アニメーション | システム1→システム2への切り替え |
| **目的の問いかけ** | 「本当に必要？」と質問 | メタ認知を活性化 |
| **統計の可視化** | 阻止した回数、節約時間を表示 | 自己効力感の向上 |

#### one secの改善の余地

| 課題 | StopShortsの対策 |
|------|-----------------|
| **慣れの問題** | 複数の習慣形成手法を組み合わせ、バリエーションで対応 |
| **受動的** | アプリ内訓練モードで能動的な練習を提供 |
| **単一アプローチ** | 科学的に実証された複数の手法を統合 |

---

## 心理学的基盤

### 依存のメカニズム

ショート動画依存は以下の要因で形成される：

```
┌─────────────────────────────────────────────────────────────┐
│                    ドーパミン・ループ                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   [退屈・不安・ストレス]  ←───────────────────────┐          │
│           ↓                                      │          │
│   [アプリを開く衝動]                             │          │
│           ↓                                      │          │
│   [無意識にアプリを開く]                         │          │
│           ↓                                      │          │
│   [即座の報酬（新しいコンテンツ）]                │          │
│           ↓                                      │          │
│   [ドーパミン放出]                               │          │
│           ↓                                      │          │
│   [一時的な満足]                                 │          │
│           ↓                                      │          │
│   [ドーパミン低下 → 退屈・不安の増大] ───────────┘          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 二重過程理論（Dual Process Theory）

| システム | 特徴 | 例 |
|----------|------|-----|
| **システム1** | 自動的、高速、無意識、衝動的 | 無意識にアプリを開く |
| **システム2** | 意識的、低速、論理的、制御的 | 「本当に必要か？」と考える |

**StopShortsの戦略**: システム1の自動行動を中断し、システム2を活性化させる

---

## 習慣形成ツールキット

StopShortsは以下の科学的に実証された手法を統合：

### 1. Implementation Intentions（実行意図）

**提唱者**: Peter Gollwitzer（1999）

**概要**: 「Xが起きたら、Yをする」という形式で事前に計画を立てる

**研究効果**: 目標達成率が2-3倍に向上

**StopShortsでの実装**:
- オンボーディングで If-Then プランを設定
- 介入時に設定したプランを表示
- 毎日のリマインダーで復習

```
┌─────────────────────────────────────────┐
│                                         │
│  あなたのIf-Thenプラン                  │
│                                         │
│  「ショート動画を開きたくなったら...」  │
│                                         │
│  →「深呼吸を3回する」                   │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │  ⚪ ⚪ ⚪  深呼吸カウンター        │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

---

### 2. Habit Stacking（習慣の連結）

**提唱者**: James Clear（Atomic Habits, 2018）

**概要**: 既存の習慣に新しい習慣を連結

**形式**: 「[現在の習慣]をした後に、[新しい習慣]をする」

**StopShortsでの実装**:
- 朝のルーティンとして「訓練モード」を組み込む
- 通知タイミングを既存習慣に連動

```
設定画面:
┌─────────────────────────────────────────┐
│                                         │
│  訓練リマインダー                        │
│                                         │
│  いつ訓練しますか？                      │
│                                         │
│  ○ 朝起きてすぐ                         │
│  ● コーヒーを飲んだ後 ← ユーザー選択    │
│  ○ 昼食後                              │
│  ○ 寝る前                              │
│  ○ カスタム時間                        │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  💡 既存の習慣に連結すると              │
│     定着率が74%向上します               │
│                                         │
└─────────────────────────────────────────┘
```

---

### 3. Temptation Bundling（誘惑の抱き合わせ）

**提唱者**: Katy Milkman（2014）

**概要**: 「やりたいこと」と「やるべきこと」を組み合わせる

**研究効果**: 運動頻度が51%向上

**StopShortsでの実装**:
- 「やめた時間」を「ご褒美活動」に変換
- 代替活動の達成でポイント獲得

```
┌─────────────────────────────────────────┐
│                                         │
│  🎁 ご褒美タイム                        │
│                                         │
│  今日15分節約しました！                 │
│                                         │
│  この時間で好きなことをしましょう：     │
│                                         │
│  ┌─────────────────────────────────┐   │
│  │ 📖 読書（あなたの代替活動）      │   │
│  └─────────────────────────────────┘   │
│  ┌─────────────────────────────────┐   │
│  │ 🎮 ゲーム（15分だけ！）         │   │
│  └─────────────────────────────────┘   │
│  ┌─────────────────────────────────┐   │
│  │ ☕ カフェでリラックス            │   │
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

---

### 4. WOOP（心理対比）

**提唱者**: Gabriele Oettingen（2014）

**概要**: Wish（願望）→ Outcome（成果）→ Obstacle（障害）→ Plan（計画）

**研究効果**: 目標達成率が大幅に向上、特に困難な目標に効果的

**StopShortsでの実装**:
- 週初めに WOOP セッションを実施
- 障害を事前に特定し対策を準備

```
週間WOOPセッション:
┌─────────────────────────────────────────┐
│                                         │
│  🎯 今週のWOOP                          │
│                                         │
│  【Wish - 願望】                        │
│  今週、ショート動画を1日30分以内に      │
│                                         │
│  【Outcome - 達成したらどうなる？】     │
│  ┌─────────────────────────────────┐   │
│  │ 夜10時前に寝られる              │   │
│  │ 朝すっきり起きられる            │   │
│  │ 集中力が上がる                  │   │
│  └─────────────────────────────────┘   │
│                                         │
│  【Obstacle - 何が邪魔する？】          │
│  ┌─────────────────────────────────┐   │
│  │ 電車の中で暇なとき              │   │ ← ユーザー入力
│  └─────────────────────────────────┘   │
│                                         │
│  【Plan - その時どうする？】            │
│  ┌─────────────────────────────────┐   │
│  │ 代わりにPodcastを聴く           │   │ ← If-Thenプランと連動
│  └─────────────────────────────────┘   │
│                                         │
└─────────────────────────────────────────┘
```

---

### 5. Tiny Habits（極小習慣）

**提唱者**: BJ Fogg（2019）

**概要**: 極めて小さな行動から始め、徐々に拡大

**研究効果**: 習慣定着率が大幅に向上

**StopShortsでの実装**:
- 最初の目標は「1回だけ断る」
- 段階的に目標を上げていく

```
段階的目標設定:
┌─────────────────────────────────────────┐
│                                         │
│  🌱 今週のチャレンジ                    │
│                                         │
│  Week 1: 1日1回だけ「やめる」を選ぶ     │  ← 極小目標
│  Week 2: 1日3回「やめる」を選ぶ         │
│  Week 3: 使用時間を1時間減らす          │
│  Week 4: 使用時間を30分以内に           │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  あなたの現在地: Week 2                 │
│  進捗: ███████░░░ 70%                   │
│                                         │
│  💡 小さく始めることで                  │
│     成功確率が3倍に！                   │
│                                         │
└─────────────────────────────────────────┘
```

---

### 6. Urge Surfing（衝動サーフィング）

**提唱者**: Alan Marlatt（依存症治療研究）

**概要**: 衝動を「波」として観察し、乗り越える

**研究効果**: 依存行動の再発防止に効果的

**StopShortsでの実装**:
- 介入時に衝動の強さを可視化
- 「波が過ぎるのを待つ」アニメーション

```
Urge Surfingモード:
┌─────────────────────────────────────────┐
│                                         │
│  🌊 衝動サーフィング                    │
│                                         │
│  衝動は波のように来て、                 │
│  そして過ぎていきます。                 │
│                                         │
│         ～～～～                        │
│       ～        ～                      │
│      ～          ～ ← 今ここ           │
│    ～              ～                   │
│  ──                  ──────            │
│                                         │
│  あと 45秒 で波が過ぎます               │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  深呼吸しながら、この衝動を             │
│  ただ「観察」してください。             │
│                                         │
│  判断せず、ただ感じる。                 │
│                                         │
└─────────────────────────────────────────┘
```

---

### 7. Identity-Based Habits（アイデンティティ習慣）

**提唱者**: James Clear（Atomic Habits, 2018）

**概要**: 「何をするか」ではなく「誰になるか」に焦点を当てる

**研究効果**: 内発的動機付けの強化

**StopShortsでの実装**:
- オンボーディングで「なりたい自分」を設定
- 達成時に「〜する人」としてのアイデンティティを強化

```
アイデンティティ設定:
┌─────────────────────────────────────────┐
│                                         │
│  ✨ あなたのアイデンティティ            │
│                                         │
│  「私は                                │
│    時間を大切にする人 です」            │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  今日の行動:                            │
│                                         │
│  ✓ 3回衝動を抑えた                      │
│  ✓ 45分の時間を取り戻した               │
│                                         │
│  💪 「時間を大切にする人」らしい        │
│     行動ができました！                   │
│                                         │
└─────────────────────────────────────────┘
```

---

### 8. Social Accountability（社会的説明責任）

**概要**: 他者への公言により達成率が向上

**研究効果**: 目標を他者に伝えると達成率が65%向上

**StopShortsでの実装**（将来のバージョン）:
- 友人・家族とのシェア機能
- コミュニティチャレンジ
- パートナー制度

```
将来機能:
┌─────────────────────────────────────────┐
│                                         │
│  👥 アカウンタビリティパートナー        │
│                                         │
│  パートナー: 田中さん                   │
│                                         │
│  あなた: 🔥 5日連続達成中               │
│  田中さん: 🔥 3日連続達成中             │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  [今日の進捗をシェア]                   │
│                                         │
│  [励ましメッセージを送る]               │
│                                         │
└─────────────────────────────────────────┘
```

---

## コア機能設計

### 機能1: 起動時介入（Shield）

#### フロー

```
[ユーザーがTikTokをタップ]
        ↓
[DeviceActivity検知]
        ↓
[ManagedSettingsでブロック]
        ↓
[StopShortsをフォアグラウンドに起動]
        ↓
┌─────────────────────────────┐
│                             │
│   ⏸️ ちょっと待って         │
│                             │
│   ○                        │  ← 呼吸アニメーション
│   吸って... 吐いて...        │
│                             │
│   「{If-Thenプラン}」       │  ← パーソナライズ
│                             │
│   ┌──────────┐ ┌──────────┐ │
│   │  やめる   │ │  開く    │ │
│   └──────────┘ └──────────┘ │
│                             │
│   今日の記録: 3回やめた      │
│                             │
└─────────────────────────────┘
```

#### 介入パターンのバリエーション

慣れを防ぐため、複数の介入パターンをローテーション：

| パターン | 説明 | 頻度 |
|----------|------|------|
| **深呼吸** | 標準の呼吸ガイダンス | 40% |
| **If-Then確認** | 設定したプランを表示 | 25% |
| **衝動サーフィング** | 波のアニメーション | 15% |
| **目標リマインド** | 「なりたい自分」を表示 | 10% |
| **統計表示** | 節約時間・抑えた回数 | 10% |

---

### 機能2: アプリ内訓練モード

#### コンセプト

StopShorts内でTikTok風のUIを再現し、「スワイプ→止まる」を練習させる。

**心理学的根拠:**
- **イメージトレーニング** - 実際の状況を模擬することで本番での対応力が向上
- **条件付け** - 繰り返しにより「スワイプ→深呼吸」の神経回路を形成
- **自己効力感** - 練習で成功体験を積み、実際の場面でも「できる」と感じる

#### 訓練モードの種類

| モード | 説明 | 難易度 |
|--------|------|--------|
| **基本訓練** | 5回スワイプ後に介入 | ★☆☆ |
| **ランダム訓練** | ランダムなタイミングで介入 | ★★☆ |
| **時間制限訓練** | 30秒間スワイプ→強制終了 | ★★☆ |
| **衝動認識訓練** | 衝動を感じたら自分で止める | ★★★ |
| **マインドフル訓練** | 各スワイプで「今どう感じる？」 | ★★★ |

#### フロー

```
[メイン画面から「訓練モード」を選択]
        ↓
┌─────────────────────────────┐
│  訓練モード                  │
│                             │
│  今日のおすすめ:             │
│  🎯 衝動認識訓練             │
│                             │
│  ↕ スワイプして進んでください │
│                             │
│   ┌─────────────────────┐   │
│   │      始める          │   │
│   └─────────────────────┘   │
└─────────────────────────────┘
        ↓
┌─────────────────────────────┐
│                             │
│   [モック動画サムネイル]     │  ← TikTok風UI
│                             │
│   🐵 チャンネル名            │
│   ♡ 1.2K  💬 234  ↗ 56     │
│                             │
│   ↕ スワイプで次へ           │
│                             │
│      ● ○ ○ ○ ○              │
└─────────────────────────────┘
        ↓
    [介入タイミング]
        ↓
┌─────────────────────────────┐
│                             │
│   ⏸️ ストップ               │
│                             │
│   今、何を感じていますか？   │
│                             │
│   ○ もっと見たい            │
│   ○ 退屈を埋めたい          │
│   ○ 何となく                │
│   ○ 特に何も感じない        │
│                             │
└─────────────────────────────┘
        ↓
    [選択後]
        ↓
┌─────────────────────────────┐
│                             │
│   ✓ よく気づきました！       │
│                             │
│   「もっと見たい」という     │
│   感覚は、ドーパミンが       │
│   求めているサインです。     │
│                             │
│   深呼吸して、この感覚を     │
│   観察してみましょう。       │
│                             │
│   ┌─────────────────────┐   │
│   │    深呼吸する        │   │
│   └─────────────────────┘   │
│                             │
└─────────────────────────────┘
```

---

### 機能3: 5分シールド

#### 概要
ショート動画アプリを一定時間使用すると、シールド画面を表示。

#### 介入パターン設定

```
┌─────────────────────────────────────┐
│  介入設定                            │
│                                     │
│  介入パターン                        │
│  ┌─────────────────────────────┐   │
│  │ ○ やさしめ（3段階）          │   │
│  │   1回目: 閉じるのみ           │   │
│  │   2回目: 閉じる + StopShorts  │   │
│  │   3回目: StopShortsのみ       │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ ● 標準（2段階）← デフォルト   │   │
│  │   1回目: 閉じる + StopShorts  │   │
│  │   2回目: StopShortsのみ       │   │
│  └─────────────────────────────┘   │
│  ┌─────────────────────────────┐   │
│  │ ○ 厳格（即時強制）           │   │
│  │   1回目から: StopShortsのみ   │   │
│  └─────────────────────────────┘   │
│                                     │
│  ─────────────────────────────      │
│                                     │
│  介入タイミング                      │
│                                     │
│  1回目の介入  [  5  ] 分後          │
│  2回目の介入  [ 10  ] 分後          │
│  3回目の介入  [ 15  ] 分後          │
│                                     │
└─────────────────────────────────────┘
```

---

## 統計・分析機能

### 概要

ユーザーの行動を可視化し、自己効力感と動機付けを高める。

### ダッシュボード設計

```
┌─────────────────────────────────────────┐
│                                         │
│  📊 あなたの進捗                        │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  🔥 12日連続達成中                      │  ← ストリーク
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  今日                                   │
│  ┌─────────┬─────────┬─────────┐       │
│  │ やめた  │ 使用時間 │ 節約    │       │
│  │  5回    │  23分   │  45分   │       │
│  └─────────┴─────────┴─────────┘       │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  今週のトレンド                         │
│  ┌─────────────────────────────────┐   │
│  │     ●                           │   │
│  │   ●   ●                         │   │
│  │  ●     ●   ●                    │   │
│  │ ●       ● ● ●                   │   │
│  │─────────────────────────────────│   │
│  │ 月  火  水  木  金  土  日       │   │
│  └─────────────────────────────────┘   │
│                                         │
│  [詳細を見る]                           │
│                                         │
└─────────────────────────────────────────┘
```

### 詳細統計画面

```
┌─────────────────────────────────────────┐
│                                         │
│  📈 詳細統計                            │
│                                         │
│  ────────────────────────────────       │
│  期間: [今週 ▼]                         │
│  ────────────────────────────────       │
│                                         │
│  【使用時間】                           │
│  ┌─────────────────────────────────┐   │
│  │ 今週平均    45分/日              │   │
│  │ 先週平均    68分/日              │   │
│  │ 変化       ▼ 34% 改善 🎉        │   │
│  └─────────────────────────────────┘   │
│                                         │
│  【衝動コントロール】                   │
│  ┌─────────────────────────────────┐   │
│  │ やめた回数      28回             │   │
│  │ 開いた回数      12回             │   │
│  │ 成功率         70% ↑            │   │
│  └─────────────────────────────────┘   │
│                                         │
│  【時間帯別パターン】                   │
│  ┌─────────────────────────────────┐   │
│  │ 朝 (6-9)     ██░░░░░░  低       │   │
│  │ 昼 (12-14)   ████░░░░  中       │   │
│  │ 夜 (21-24)   ████████  高 ⚠️   │   │  ← 要注意時間帯
│  └─────────────────────────────────┘   │
│                                         │
│  【トリガー分析】                       │
│  ┌─────────────────────────────────┐   │
│  │ 1. 寝る前の習慣      45%         │   │
│  │ 2. 電車での暇つぶし  30%         │   │
│  │ 3. 仕事の合間        25%         │   │
│  └─────────────────────────────────┘   │
│                                         │
│  💡 アドバイス:                         │
│  寝る前の使用が最も多いです。           │
│  寝室にスマホを持ち込まない習慣を       │
│  試してみませんか？                     │
│                                         │
└─────────────────────────────────────────┘
```

### 週間レポート

毎週日曜日にプッシュ通知で週間レポートを送信：

```
┌─────────────────────────────────────────┐
│                                         │
│  📋 週間レポート (12/14 - 12/20)        │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  🎉 今週の成果                          │
│                                         │
│  ✓ 使用時間を34%削減しました            │
│  ✓ 28回衝動を抑えました                 │
│  ✓ 約5時間の時間を取り戻しました        │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  📊 あなたの変化                        │
│                                         │
│  【先週との比較】                       │
│  使用時間: 68分/日 → 45分/日 (▼34%)    │
│  成功率:   55% → 70% (▲15pt)           │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  🎯 来週のチャレンジ                    │
│                                         │
│  「使用時間を40分以内に抑える」         │
│                                         │
│  [チャレンジを受ける]                   │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  💪 「時間を大切にする人」として        │
│     着実に成長しています！              │
│                                         │
└─────────────────────────────────────────┘
```

### データ構造

```typescript
interface UsageStatistics {
  // 日次データ
  daily: {
    date: string;                    // ISO date
    totalUsageMinutes: number;       // 総使用時間（分）
    appBreakdown: {                  // アプリ別
      tiktok: number;
      youtubeShorts: number;
      instagramReels: number;
    };
    interventions: {
      triggered: number;             // 介入回数
      dismissed: number;             // 「やめる」選択回数
      continued: number;             // 「開く」選択回数
    };
    training: {
      sessionsCompleted: number;     // 訓練セッション数
      totalMinutes: number;          // 訓練時間
    };
    triggers: {                      // トリガー記録
      timeOfDay: 'morning' | 'afternoon' | 'evening' | 'night';
      context?: string;              // ユーザー入力（任意）
    }[];
  }[];

  // 週次サマリー
  weekly: {
    weekStart: string;
    averageDailyUsage: number;
    totalInterventions: number;
    successRate: number;             // やめた回数 / 介入回数
    streak: number;                  // 連続達成日数
    savedMinutes: number;            // 節約時間
    trainingMinutes: number;         // 訓練時間
  }[];

  // 累計データ
  lifetime: {
    totalSavedHours: number;
    totalInterventions: number;
    longestStreak: number;
    currentStreak: number;
    startDate: string;
  };
}
```

---

## ゲーミフィケーション

### ストリーク（連続達成）

```
┌─────────────────────────────────────────┐
│                                         │
│  🔥 ストリーク                          │
│                                         │
│       🔥🔥🔥🔥🔥                         │
│         12日連続                        │
│                                         │
│  ─────────────────────────────────      │
│                                         │
│  マイルストーン:                        │
│  ✓ 3日  ✓ 7日  ✓ 10日  ○ 14日  ○ 21日 │
│                                         │
│  次のマイルストーンまで: あと2日        │
│                                         │
└─────────────────────────────────────────┘
```

### 達成条件
- 1日の使用時間が目標以内
- または、介入で1回以上「やめる」を選択

### バッジシステム

| バッジ | 条件 | 説明 |
|--------|------|------|
| 🌱 芽生え | 初めて「やめる」を選択 | 第一歩を踏み出しました |
| 🔥 3日連続 | 3日連続達成 | 習慣の芽が出てきました |
| 💪 1週間戦士 | 7日連続達成 | 新しい習慣が形成中 |
| ⭐ 2週間マスター | 14日連続達成 | 習慣が定着し始めています |
| 🏆 21日チャンピオン | 21日連続達成 | 習慣形成の定説達成！ |
| 👑 66日レジェンド | 66日連続達成 | 科学的に習慣が定着 |
| ⏰ 10時間救済者 | 累計10時間節約 | 貴重な時間を取り戻しました |
| 🛡️ 100回ディフェンダー | 100回「やめる」選択 | 衝動をコントロールする力 |
| 🧘 マインドフルマスター | 訓練20回完了 | 自己認識が高まっています |

### 週間チャレンジ

```
┌─────────────────────────────────────────┐
│                                         │
│  🎯 今週のチャレンジ                    │
│                                         │
│  「夜10時以降の使用を0分に」            │
│                                         │
│  進捗: ████████░░ 80%                   │
│  残り: 1日                              │
│                                         │
│  報酬: 🏅 ナイトオウル・バスターバッジ   │
│                                         │
└─────────────────────────────────────────┘
```

---

## 技術的実装要件

### Screen Time API

| フレームワーク | 用途 |
|---------------|------|
| `FamilyControls` | 権限取得、対象アプリ選択 |
| `DeviceActivity` | アプリ起動・使用時間の検知 |
| `ManagedSettings` | アプリのブロック・解除 |

### 必要なエンタイトルメント

```
com.apple.developer.family-controls
```

> ⚠️ **注意**: Family Controls entitlementはAppleへの申請・承認が必要

### アーキテクチャ

```
┌─────────────────────────────────────────────────────────────┐
│                    StopShorts App                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐  ┌─────────────────┐                  │
│  │   React Native  │  │  Native Modules │                  │
│  │   (UI Layer)    │◄─│  (Bridge)       │                  │
│  └────────┬────────┘  └────────┬────────┘                  │
│           │                    │                            │
│  ┌────────▼────────────────────▼────────┐                  │
│  │           Zustand Store              │                  │
│  │  (State Management + Persistence)    │                  │
│  └────────────────┬─────────────────────┘                  │
│                   │                                         │
│  ┌────────────────▼─────────────────────┐                  │
│  │         Statistics Service           │                  │
│  │  (Data Processing + Analytics)       │                  │
│  └──────────────────────────────────────┘                  │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│                    App Extensions                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────┐  ┌─────────────────┐                  │
│  │ DeviceActivity  │  │ ShieldConfig    │                  │
│  │ Monitor         │  │ Extension       │                  │
│  └─────────────────┘  └─────────────────┘                  │
│                                                             │
│  ┌─────────────────┐  ┌─────────────────┐                  │
│  │ ShieldAction    │  │ Activity        │                  │
│  │ Extension       │  │ Report          │                  │
│  └─────────────────┘  └─────────────────┘                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 主要な実装タスク

#### Phase 1: 基盤構築
- [ ] DeviceActivityMonitor拡張の実装
- [ ] ShieldConfiguration / ShieldAction の実装
- [ ] 基本的なブロック・解除フロー
- [ ] Screen Time データの取得

#### Phase 2: 訓練モード
- [ ] TikTok風モックUIの実装
- [ ] スワイプインタラクション
- [ ] 訓練バリエーションの実装
- [ ] 進捗トラッキング

#### Phase 3: 統計機能
- [ ] UsageStatistics データ構造の実装
- [ ] 日次・週次データの集計
- [ ] ダッシュボードUI
- [ ] 週間レポート生成

#### Phase 4: ゲーミフィケーション
- [ ] ストリーク計算ロジック
- [ ] バッジシステム
- [ ] 週間チャレンジ
- [ ] 通知システム

#### Phase 5: 高度な機能
- [ ] 習慣形成ツールキットの統合
- [ ] AI による個別アドバイス
- [ ] 社会的機能（将来）

---

## 課金モデル

### プラン構成

| プラン | 価格 | 月額換算 | 割引率 |
|--------|------|----------|--------|
| **3日間無料トライアル** | 無料 | - | - |
| **30日チャレンジ** | ¥980 | ¥980 | - |
| **90日マスター** | ¥2,350 | ¥783 | 20%OFF |
| **年間プラン** | ¥5,880 | ¥490 | 50%OFF |

> **Note**: 有料プラン間で機能差はありません。すべて同じ全機能が利用可能です。

### 90日マスターがおすすめの理由

- **習慣形成の研究**: 新しい習慣の定着には平均66日かかる（Lally et al., 2010）
- **コミットメント効果**: 前払いすることで継続のモチベーションが高まる
- **コスパ**: 30日×3回（¥2,940）より20%お得

---

## 実装ロードマップ

### MVP (v1.0)
**目標**: 基本的な介入機能

- [ ] Screen Time API統合
- [ ] 起動時介入（深呼吸のみ）
- [ ] 5分シールド
- [ ] 基本統計（今日の使用時間、やめた回数）

### v1.1
**目標**: 訓練モード追加

- [ ] 基本訓練モード
- [ ] ランダム訓練モード
- [ ] 訓練進捗トラッキング

### v1.2
**目標**: 統計機能強化

- [ ] 詳細統計画面
- [ ] 週間レポート
- [ ] 時間帯別分析

### v1.3
**目標**: ゲーミフィケーション

- [ ] ストリークシステム
- [ ] バッジシステム
- [ ] 週間チャレンジ

### v2.0
**目標**: 習慣形成ツールキット

- [ ] WOOP セッション
- [ ] 衝動サーフィングモード
- [ ] アイデンティティ機能
- [ ] 高度な訓練モード

### 将来 (v3.0+)
- [ ] 社会的機能（パートナー、コミュニティ）
- [ ] AI パーソナライズドコーチング
- [ ] Apple Watch対応

---

## 参考文献

1. Gollwitzer, P. M. (1999). Implementation intentions: Strong effects of simple plans. American Psychologist.
2. Clear, J. (2018). Atomic Habits. Avery.
3. Milkman, K. L. et al. (2014). Holding the Hunger Games hostage at the gym. Management Science.
4. Oettingen, G. (2014). Rethinking Positive Thinking. Current.
5. Fogg, B. J. (2019). Tiny Habits. Houghton Mifflin Harcourt.
6. Lally, P. et al. (2010). How are habits formed. European Journal of Social Psychology.
7. Marlatt, G. A. & Gordon, J. R. (1985). Relapse Prevention. Guilford Press.
8. Kahneman, D. (2011). Thinking, Fast and Slow. Farrar, Straus and Giroux.

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|----------|
| 2025-12-20 | 1.0 | 初版作成 |
| 2025-12-20 | 1.1 | ダッシュボード設定、課金モデル追加 |
| 2025-12-20 | 2.0 | 習慣形成ツールキット、統計機能、ゲーミフィケーション、実装ロードマップを追加。科学的根拠の充実。 |

